{"version":3,"sources":["raw-mjs/kendo.ripple.cmn.chunk.js"],"names":["__meta__","id","name","category","description","depends","hidden","chunk","closest","element","selector","matches","Element","prototype","el","sel","msMatchesSelector","node","parentElement","createRipple","doc","ripple","createElement","className","blob","appendChild","once","eventName","fn","listener","removeEventListener","remove","addEventListener","activate","containerSelector","options","e","container","target","document","ownerDocument","test","type","classList","contains","add","_a","state_1","animated","released","eventType","focusin","keydown","mousedown","pointerdown","touchdown","animationstart","currentTarget","release","window","getComputedStyle","getPropertyValue","rect","getBoundingClientRect","left","top_1","clientX","clientY","top","width","height","dx","dy","size","Math","sqrt","style","offsetWidth","Error","cssText","setTimeout","finishAnimation","state","deactivate","parentNode","removeChild","transition","opacity","register","root","elements","arr","handlers","map","item","defaultOptions","events","global","activator","body","forEach","evt","concat","apply"],"mappings":"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","file":"kendo.ripple.cmn.chunk.js","sourcesContent":["\n\nconst __meta__ = {\n    id: \"ripple.cmn.chunk\",\n    name: \"RippleCmnChunk\",\n    category: \"web\",\n    description: \"A reusable outputed chunk of code\",\n    depends: [],\n    hidden: true,\n    chunk: true\n};\n\nvar closest = function (element, selector) {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    var matches = Element.prototype.matches ?\n        function (el, sel) { return el.matches(sel); }\n        : function (el, sel) { return el.msMatchesSelector(sel); };\n    var node = element;\n    while (node) {\n        if (matches(node, selector)) {\n            return node;\n        }\n        node = node.parentElement;\n    }\n};\nvar createRipple = function (doc) {\n    var ripple = doc.createElement('div');\n    ripple.className = 'k-ripple';\n    var blob = doc.createElement('div');\n    blob.className = 'k-ripple-blob';\n    ripple.appendChild(blob);\n    return [ripple, blob];\n};\nvar once = function (element, eventName, fn) {\n    var listener = function () {\n        fn();\n        element.removeEventListener(eventName, listener, false);\n    };\n    var remove = function () { return element.addEventListener(eventName, listener, false); };\n    remove();\n    return { remove: remove };\n};\nvar activate = function (containerSelector, options) { return function (e) {\n    var target = e.target;\n    var doc = target.document || target.ownerDocument;\n    var container;\n    if (options.container) {\n        container = options.container(target);\n    }\n    else {\n        container = closest(target, containerSelector);\n    }\n    if (!container) {\n        return;\n    }\n    // focus event of ripple container triggers double-focus\n    var doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n    if (doubleFocus) {\n        return;\n    }\n    if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n        // suppress focus when animating ripples\n        container.classList.add(\"k-ripple-target\");\n        var _a = createRipple(doc), ripple = _a[0], blob = _a[1];\n        var state_1 = {\n            animated: false,\n            released: false,\n            blob: blob,\n            container: container,\n            ripple: ripple\n        };\n        var eventType = {\n            'focusin': 'focusout',\n            'keydown': 'keyup',\n            'mousedown': 'mouseup',\n            'pointerdown': 'pointerup',\n            'touchdown': 'touchup',\n            'animationstart': 'animationend'\n        }[e.type];\n        once(e.currentTarget, eventType, function () { return release(state_1); });\n        container.appendChild(ripple);\n        // recalc to allow the effect to animate\n        window.getComputedStyle(ripple).getPropertyValue('opacity');\n        var rect = container.getBoundingClientRect();\n        var left = 0;\n        var top_1 = 0;\n        if ((/mouse|pointer|touch/).test(e.type)) {\n            left = e.clientX - rect.left;\n            top_1 = e.clientY - rect.top;\n        }\n        else {\n            left = rect.width / 2;\n            top_1 = rect.height / 2;\n        }\n        // coordinates of the farthest corner\n        var xMax = left < rect.width / 2 ? rect.width : 0;\n        var yMax = top_1 < rect.height / 2 ? rect.height : 0;\n        // distance to the farthest corner\n        var dx = left - xMax;\n        var dy = top_1 - yMax;\n        // blob size is twice the blob radius\n        var size = 2 * Math.sqrt(dx * dx + dy * dy);\n        var duration = 500;\n        blob.style.width = blob.style.height = size + \"px\";\n        // force reflow for Safari 11 to align ripple blob\n        if (blob.offsetWidth < 0) {\n            throw new Error(\"Inconceivable!\");\n        }\n        blob.style.cssText = \"\\n        width: \" + size + \"px;\\n        height: \" + size + \"px;\\n        transform: translate(-50%, -50%) scale(1);\\n        left: \" + left + \"px;\\n        top: \" + top_1 + \"px;\\n    \";\n        setTimeout(function () { return finishAnimation(state_1); }, duration);\n    }\n    else {\n        e.target.classList.remove('k-ripple-focus');\n        if (e.type !== 'animationend') {\n            e.target.classList.add('k-ripple-focus');\n        }\n    }\n}; };\nvar finishAnimation = function (state) {\n    state.animated = true;\n    deactivate(state);\n};\nvar release = function (state) {\n    state.released = true;\n    deactivate(state);\n};\nvar deactivate = function (state) {\n    // deactivation happens when both\n    // - the activation event has been released (release)\n    // - the ripple has finished animating (finishAnimation)\n    if (!state.released || !state.animated) {\n        return;\n    }\n    var blob = state.blob, ripple = state.ripple, container = state.container;\n    if (container) {\n        once(container, 'blur', function () { return container.classList.remove(\"k-ripple-target\"); });\n    }\n    if (blob) {\n        once(blob, 'transitionend', function () {\n            if (ripple && ripple.parentNode) {\n                ripple.parentNode.removeChild(ripple);\n            }\n        });\n        blob.style.transition = 'opacity 200ms linear';\n        blob.style.opacity = '0';\n    }\n};\n/**\n * @hidden\n */\nvar register = function (root, elements) {\n    var flatten = function (arr) { return [].concat.apply([], arr); };\n    var handlers = flatten(elements.map(function (item) {\n        var defaultOptions = {\n            events: ['mousedown', 'touchdown'],\n            global: false\n        };\n        var selector = item.selector, _a = item.options, options = _a === void 0 ? defaultOptions : _a;\n        var activator = activate(selector, options);\n        var events = options.events || defaultOptions.events;\n        var container = options.global ? document.body : root;\n        events.forEach(function (evt) { return container.addEventListener(evt, activator, false); });\n        return { events: events, options: options, activator: activator };\n    }));\n    return function () {\n        if (!root) {\n            return;\n        }\n        var removeListener = function (_a) {\n            var events = _a.events, options = _a.options, activator = _a.activator;\n            var container = options.global ? document.body : root;\n            events.forEach(function (evt) { return container.removeEventListener(evt, activator, false); });\n        };\n        handlers.forEach(removeListener);\n        root = null;\n    };\n};\n\nexport { register as r };\nexport { __meta__ };"]}